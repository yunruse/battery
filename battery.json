{
 "functions": {
  "active": {
   "description": "Return True iff the device is on battery.",
   "type": "boolean"
  },
  "percent": {
   "description": "Return percentage charge of battery in [0, 100].",
   "type": "number"
  },
  "minutes_remaining": {
   "description": "Remaining battery time (may be empty if not known).",
   "type": "number"
  },
  "capacity": {
   "description": "Battery's current capacity in mAh.",
   "type": "number"
  },
  "design_capacity": {
   "description": "Battery's original capacity in mAh (in Windows: mWh).",
   "type": "number"
  }
 },
 "commands": {
  "macos": {
   "active": "pmset -g batt | head -n1 | grep -qv \"'Battery Power'\"; echo $?",
   "percent": "pmset -g batt | grep InternalBattery | grep -Eo '\\d+%'| grep -Eo '\\d+'",
   "minutes_remaining": "pmset -g batt | grep discharging | grep -Eo '\\d+:\\d+' | awk '{S=($1*60)+$2}END{print S}' FS=:",
   "capacity": "ioreg -l -w0 | grep '\"MaxCapacity\" = ' | grep -Eo '\\d+'",
   "design_capacity": "ioreg -l -w0 | grep '\"DesignCapacity\" = ' | grep -Eo '\\d+'"
  },
  "windows": {
   "active": "((WMIC PATH Win32_Battery Get BatteryStatus) -split '\n')[2] -match '[245]'",
   "percent": "((WMIC PATH Win32_Battery Get EstimatedChargeRemaining) -split '\n')[2]",
   "minutes_remaining": "[int32]((WMIC PATH Win32_Battery Get EstimatedRunTime) -split '\n')[2] | %{@('', $_)[$_ -ne 71582788]}",
   "capacity": "((WMIC PATH Win32_Battery Get FullChargeCapacity) -split '\n')[2]",
   "design_capacity": "((WMIC PATH Win32_Battery Get DesignCapacity) -split '\n')[2]"
  }
 }
}